<section>
  <div class="container">
    <div class="row">
      <div class="col">
        <div class="center">
          <h1 class="title">Sensors in Cary's Downtown Park</h1>
          <ods-dataset-context
            context="downtownparkmap"
            downtownparkmap-dataset="downtown-park-map"
            ng-init="values = {};"
          >
            <p class="kpi-description">
              Last Updated:<span class="kpi-value2">
                {{ downtownparkmap.dataset.metas.metadata_processed | date
                }}</span
              >
            </p>
          </ods-dataset-context>
        </div>
      </div>
    </div>
  </div>
</section>
<section>
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="center">
          <h2>Types of Sensors</h2>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="chart-title">
          <div class="center">
            Downtown Park Sensors<sup
              >[<a href="#DowntownParkSensors" id="citation-1-a"
                ><span>1</span></a
              >]
            </sup>
          </div>
        </div>
        <figure>
          <ods-dataset-context
            context="downtownparkmap"
            downtownparkmap-dataset="downtown-park-map"
          >
            <ods-map
              no-refit="true"
              scroll-wheel-zoom="false"
              toolbar-fullscreen="true"
              basemap="jawg.streets"
              location="17,35.78441,-78.7778"
            >
              <ods-map-layer-group>
                <ods-map-layer
                  context="downtownparkmap"
                  color-categories="{'Occupancy Sensor':'#AF5FA2','Door Sensor':'#C64513','Paper Towel Sensor':'#638E5B','Sound Sensor':'#1216CC','Trash Sensor':'#BA0129'}"
                  color-by-field="type"
                  picto="ods-circle"
                  show-marker="true"
                  display="categories"
                  shape-opacity="0.5"
                  point-opacity="1"
                  border-color="#FFFFFF"
                  border-opacity="1"
                  border-size="1"
                  border-pattern="solid"
                  caption="true"
                  title="Downtown Park Sensors"
                  description="Listings of sensors and relevant sensor data within Cary's Downtown Park."
                  size="4"
                ></ods-map-layer>
              </ods-map-layer-group>
            </ods-map>
          </ods-dataset-context>
        </figure>
      </div>
    </div>
  </div>
</section>
<br />
<section>
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="center">
          <h2>Door Sensor Cluster Map</h2>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="chart-title">
          <div class="center">
            Downtown Park Door Sensors<sup
              >[<a href="#DowntownParkSensors" id="citation-1-a"
                ><span>2</span></a
              >]
            </sup>
          </div>
        </div>
        <figure>
          <ods-dataset-context
            context="sensordatacapture"
            sensordatacapture-dataset="sensor-data-capture"
            sensordatacapture-parameters="{'refine.type':'Door Sensor','refine.link_type':'uplink'}"
          >
            <ods-map
              no-refit="true"
              scroll-wheel-zoom="false"
              search-box="true"
              toolbar-fullscreen="true"
              toolbar-geolocation="true"
              basemap="jawg.streets"
              location="17,35.78441,-78.7778"
            >
              <ods-map-layer-group>
                <ods-map-layer
                  context="sensordatacapture"
                  color="#C32D1C"
                  picto="ods-circle"
                  show-marker="true"
                  display="clusters"
                  function="COUNT"
                  expression="decoded_content_0_value"
                  shape-opacity="0.5"
                  point-opacity="1"
                  border-color="#FFFFFF"
                  border-opacity="1"
                  border-size="1"
                  border-pattern="solid"
                  caption="true"
                  title="Downtown Park Sensor Data"
                  description="Wide form sensor data from the devices themselves in Downtown Cary Park."
                  size-min="3"
                  size-max="5"
                  size-function="linear"
                ></ods-map-layer>
              </ods-map-layer-group>
            </ods-map>
          </ods-dataset-context>
        </figure>
      </div>
    </div>
  </div>
</section>
<br />
<section>
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="center">
          <h2>Door Sensor Heatmap</h2>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="chart-title">
          <div class="center">
            Downtown Park Door Sensors<sup
              >[<a href="#DowntownParkSensors" id="citation-1-a"
                ><span>2</span></a
              >]
            </sup>
          </div>
        </div>
        <figure>
          <ods-dataset-context
            context="sensordatacapture"
            sensordatacapture-dataset="sensor-data-capture"
            sensordatacapture-parameters="{'refine.link_type':'uplink','refine.type':'Door Sensor'}"
          >
            <ods-map
              no-refit="true"
              scroll-wheel-zoom="false"
              search-box="true"
              toolbar-fullscreen="true"
              toolbar-geolocation="true"
              basemap="jawg.streets"
              location="17,35.78441,-78.7778"
            >
              <ods-map-layer-group>
                <ods-map-layer
                  context="sensordatacapture"
                  color-gradient="{'1':'#FF0000','0.4':'#0000FF','0.6':'#00FFFF','0.7':'#00FF00','0.8':'#FFFF00'}"
                  picto="ods-circle"
                  show-marker="true"
                  display="heatmap"
                  radius="4"
                  function="COUNT"
                  expression="decoded_content_0_value"
                  shape-opacity="0.5"
                  point-opacity="1"
                  border-color="#FFFFFF"
                  border-opacity="1"
                  border-size="1"
                  border-pattern="solid"
                  caption="true"
                  title="Downtown Park Sensor Data"
                  description="Wide form sensor data from the devices themselves in Downtown Cary Park."
                  size-function="linear"
                ></ods-map-layer>
              </ods-map-layer-group>
            </ods-map>
          </ods-dataset-context>
        </figure>
      </div>
    </div>
  </div>
</section>
<br />
<section>
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="center">
          <h2>Sound Sensor Measurements</h2>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="chart-title">
          <div class="center">
            Downtown Park Sound Sensors<sup
              >[<a href="#DowntownParkSoundSensors" id="citation-1-a"
                ><span>2</span></a
              >]
            </sup>
          </div>
        </div>
        <figure>
          <ods-dataset-context
            context="downtownparksoundsensors"
            downtownparksoundsensors-dataset="downtown-park-sound-sensors"
            downtownparksoundsensors-parameters="{'disjunctive.sound_level':true}"
          >
            <ods-chart scientific-display="false" align-month="true">
              <ods-chart-query
                context="downtownparksoundsensors"
                field-x="rx_datetime"
                maxpoints="0"
                timescale="minute"
                series-breakdown="location_name"
              >
                <ods-chart-serie
                  expression-y="sound_level"
                  chart-type="line"
                  function-y="AVG"
                  color="range-custom"
                  scientific-display="true"
                >
                </ods-chart-serie>
              </ods-chart-query>
            </ods-chart>
          </ods-dataset-context>
        </figure>
      </div>
    </div>
  </div>
</section>
<br />
